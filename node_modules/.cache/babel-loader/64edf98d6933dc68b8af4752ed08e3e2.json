{"ast":null,"code":"var _jsxFileName = \"/home/srikanth/Documents/astrum_dashboard/src/components/imageClassiferBuilder.js\";\nimport React, { useState } from 'react';\nimport { Typography, ThemeProvider, TextField, CircularProgress, Snackbar, SnackbarContent } from '@material-ui/core';\nimport FileDropper from './fileDropper';\nimport Button from '@material-ui/core/Button';\nimport Alert from '@material-ui/lab/Alert';\nimport { Link } from 'react-router-dom';\nconst styles = {\n  buildButton: {\n    marginTop: '40px'\n  },\n  projectName: {\n    marginTop: '40px'\n  }\n};\nexport default function ImageClassiferBuilder(props) {\n  const [files, setFiles] = useState([]);\n  const user = props.user;\n  const [jobName, setJobName] = useState(\"\");\n  const [jobID, setJobID] = useState(\"\");\n  const [loading, isLoading] = useState(false);\n  const baseURL = 'https://astrumdashboard.appspot.com/';\n\n  function upload_dataset() {\n    var xhr = new XMLHttpRequest();\n    xhr.open('POST', baseURL + 'datasets');\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n    var post_body = {\n      \"type\": \"image_classification\",\n      \"uploaded_by\": user.uid\n    };\n    post_body[\"child_datasets\"] = files;\n    xhr.send(JSON.stringify(post_body));\n    xhr.addEventListener('load', () => {\n      if (xhr.status === 200) {\n        const datasetID = JSON.parse(xhr.response).dataset_id;\n        beginTraining(datasetID);\n      }\n    });\n  }\n\n  function beginTraining(dID) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('POST', baseURL + 'jobs');\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n    var post_body = {\n      \"type\": \"image_classification\",\n      \"dataset\": dID,\n      \"created_by\": user.uid,\n      \"created_at\": Math.floor(new Date() / 1000),\n      'name': jobName\n    };\n    xhr.send(JSON.stringify(post_body));\n    xhr.addEventListener('load', () => {\n      if (xhr.status === 200) {\n        const jobID = JSON.parse(xhr.response).job_id;\n        console.log(\"Recieved jobID \" + jobID);\n        isLoading(false);\n        setJobID(jobID);\n      }\n    });\n  }\n\n  function build_classifer() {\n    isLoading(true);\n    upload_dataset();\n  }\n\n  const ShowSpinner = () => {\n    if (loading) {\n      return React.createElement(CircularProgress, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      });\n    } else {\n      return null;\n    }\n  };\n\n  const Redirect = () => {\n    if (jobID) {\n      console.log(\"Redirecting\");\n      return React.createElement(Redirect, {\n        to: \"/dashboard/all_projects\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      });\n    } else {\n      console.log(\"Not yet redirecting\");\n      return null;\n    }\n  };\n\n  const SnackbarAction = React.createElement(Link, {\n    to: \"/dashboard/all_projects\",\n    style: {\n      'textDecoration': 'none',\n      color: '#FFF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Track Job\"));\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"Image classifiers come in two flavours. Multi-label classification, and Single-label classification\"), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }), React.createElement(Typography, {\n    variant: \"h\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }), React.createElement(FileDropper, {\n    setFilesAction: setFiles,\n    firebase: props.firebase,\n    user: props.user,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }), React.createElement(\"form\", {\n    style: styles.projectName,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Give your project a name\"), React.createElement(TextField, {\n    onChange: e => setJobName(e.target.value),\n    id: \"jobName\",\n    label: \"Project Name\",\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  })), React.createElement(Button, {\n    style: styles.buildButton,\n    variant: \"outlined\",\n    color: \"primary\",\n    disabled: Object.keys(files).length < 2 || jobID !== \"\" || jobName === \"\" || loading,\n    onClick: build_classifer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \"Build Predictor\"), React.createElement(ShowSpinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }), React.createElement(Snackbar, {\n    open: jobID !== \"\",\n    autoHideDuration: 6000,\n    anchorOrigin: {\n      'horizontal': \"right\",\n      'vertical': \"bottom\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(SnackbarContent, {\n    action: SnackbarAction,\n    message: \"Sit tight, we're training a neural network for you ;)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/home/srikanth/Documents/astrum_dashboard/src/components/imageClassiferBuilder.js"],"names":["React","useState","Typography","ThemeProvider","TextField","CircularProgress","Snackbar","SnackbarContent","FileDropper","Button","Alert","Link","styles","buildButton","marginTop","projectName","ImageClassiferBuilder","props","files","setFiles","user","jobName","setJobName","jobID","setJobID","loading","isLoading","baseURL","upload_dataset","xhr","XMLHttpRequest","open","setRequestHeader","post_body","uid","send","JSON","stringify","addEventListener","status","datasetID","parse","response","dataset_id","beginTraining","dID","Math","floor","Date","job_id","console","log","build_classifer","ShowSpinner","Redirect","SnackbarAction","color","firebase","e","target","value","Object","keys","length"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Typography, ThemeProvider, TextField, CircularProgress, Snackbar, SnackbarContent } from '@material-ui/core'\nimport FileDropper from './fileDropper'\nimport Button from '@material-ui/core/Button'\nimport Alert from '@material-ui/lab/Alert'\nimport { Link } from 'react-router-dom'\n\n\nconst styles = {\n    buildButton: {\n        marginTop: '40px'\n    },\n    projectName: {\n        marginTop: '40px'\n    }\n}\n\nexport default function ImageClassiferBuilder(props) {\n\n    const [files, setFiles] = useState([])\n    const user = props.user;\n    const [jobName, setJobName] = useState(\"\")\n    const [jobID, setJobID] = useState(\"\")\n    const [loading, isLoading] = useState(false)\n    const baseURL = 'https://astrumdashboard.appspot.com/'\n\n    function upload_dataset() {\n        var xhr = new XMLHttpRequest()\n        xhr.open('POST', baseURL + 'datasets')\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n\n        var post_body = {\n            \"type\": \"image_classification\",\n            \"uploaded_by\": user.uid\n        }\n        post_body[\"child_datasets\"] = files\n        xhr.send(JSON.stringify(\n            post_body\n        ))\n        xhr.addEventListener('load', () => {\n            if (xhr.status === 200) {\n                const datasetID = JSON.parse(xhr.response).dataset_id\n                beginTraining(datasetID)\n            }\n        })\n    }\n\n    function beginTraining(dID) {\n        var xhr = new XMLHttpRequest()\n        xhr.open('POST', baseURL + 'jobs')\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n\n        var post_body = {\n            \"type\": \"image_classification\",\n            \"dataset\": dID,\n            \"created_by\": user.uid,\n            \"created_at\": Math.floor(new Date() / 1000),\n            'name': jobName\n        }\n\n        xhr.send(JSON.stringify(\n            post_body\n        ))\n        xhr.addEventListener('load', () => {\n            if (xhr.status === 200) {\n                const jobID = JSON.parse(xhr.response).job_id\n                console.log(\"Recieved jobID \" + jobID)\n                isLoading(false)\n                setJobID(jobID)\n            }\n        })\n    }\n\n    function build_classifer() {\n        isLoading(true)\n        upload_dataset()\n    }\n\n    const ShowSpinner = () => {\n        if (loading) {\n            return (\n                <CircularProgress />\n            )\n        } else {\n            return (\n                null\n            )\n        }\n    }\n\n    const Redirect = () => {\n        if (jobID){\n            console.log(\"Redirecting\")\n            return (\n                <Redirect to='/dashboard/all_projects'/>\n            )\n        }else{\n            console.log(\"Not yet redirecting\")\n            return (\n                null\n            )\n        }\n    }\n\n    const SnackbarAction = (\n        <Link to='/dashboard/all_projects' style={{'textDecoration': 'none', color: '#FFF'}}>\n            <Button color='primary' variant='contained' size='small'>\n                Track Job\n            </Button>\n        </Link>\n    )\n\n    return (\n        <div>\n            <Typography>Image classifiers come in two flavours. Multi-label classification, and Single-label classification</Typography>\n            <br></br>\n            <Typography variant='h'></Typography>\n            <FileDropper setFilesAction={setFiles} firebase={props.firebase} user={props.user}></FileDropper>\n            <form style={styles.projectName}>\n                <h2>Give your project a name</h2>\n                <TextField onChange={e => setJobName(e.target.value)} id='jobName' label='Project Name' variant='outlined' />\n            </form>\n            <Button style={styles.buildButton} variant='outlined' color='primary' disabled={Object.keys(files).length < 2 || jobID !== \"\" || jobName === \"\" || loading} onClick={build_classifer}>Build Predictor</Button>\n            <ShowSpinner />\n            <Snackbar open={jobID !== \"\"} autoHideDuration={6000} anchorOrigin={{'horizontal': \"right\", 'vertical': \"bottom\"}}>\n                <SnackbarContent\n                    action={SnackbarAction}\n                    message={\"Sit tight, we're training a neural network for you ;)\"}\n                />\n            </Snackbar>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}