{"ast":null,"code":"var _jsxFileName = \"/home/srikanth/Documents/astrum_dashboard/dashboard/src/components/imageClassiferBuilder.js\";\nimport React, { useState } from 'react';\nimport { Typography } from '@material-ui/core';\nimport FileDropper from './fileDropper';\nimport Button from '@material-ui/core/Button';\nimport { v4 as uuidv4 } from 'uuid';\nconst styles = {\n  buildButton: {\n    marginTop: '20px'\n  }\n};\nexport default function ImageClassiferBuilder(props) {\n  const [files, setFiles] = useState([]);\n  const user = props.user;\n  const [datasetID, setDatasetID] = useState(\"\");\n  const firebase = props.firebase;\n\n  function upload_dataset() {\n    const folderID = uuidv4();\n    firebase.uploadFiles(files, user, folderID).then(function (values) {\n      firebase.getDownloadURL(folderID).then(function (url) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', 'https://astrumdashboard.appspot.com/datasets');\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n        var post_body = {\n          \"type\": \"image_classification\",\n          \"uploaded_by\": user.uid,\n          \"uploaded_at\": Math.floor(new Date() / 1000),\n          \"link\": url\n        };\n\n        for (const file in files) {\n          post_body[\"child_datasets\"][file] = files[file];\n        }\n\n        xhr.send(JSON.stringify({\n          post_body\n        }));\n        xhr.addEventListener('load', () => {\n          if (xhr.status === 200) {\n            setDatasetID(JSON.parse(xhr.response).dataset_id);\n            console.log(\"Recieved data \", JSON.parse(xhr.response));\n          }\n        });\n      });\n    });\n  }\n\n  function beginTraining() {\n    var xhr = new XMLHttpRequest();\n    xhr.open('POST', 'https://astrumdashboard.appspot.com/jobs');\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n    var post_body = {\n      \"type\": \"image_classification\",\n      \"dataset\": datasetID,\n      \"created_by\": user.uid,\n      \"created_at\": Math.floor(new Date() / 1000)\n    };\n    xhr.send(JSON.stringify({\n      post_body\n    }));\n    xhr.addEventListener('load', () => {\n      if (xhr.status === 200) {\n        var headers = JSON.parse(xhr.response).features;\n        console.log(\"Posted dataset\");\n      }\n    });\n  }\n\n  function build_classifer() {\n    upload_dataset();\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"First we'll need to upload data. In the box below, drop folders containing your image classes\"), React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"You'll need to organize your images into folders to make sure that the algorithm learns correctly. For instance, if you want to classify dogs vs. cats, you'll need to create two folders. One containing dog images, and another containing cat images.\"), React.createElement(FileDropper, {\n    setFilesAction: setFiles,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Button, {\n    style: styles.buildButton,\n    variant: \"outlined\",\n    color: \"primary\",\n    disabled: Object.keys(files).length < 2,\n    onClick: build_classifer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Build Predictor\")));\n}","map":{"version":3,"sources":["/home/srikanth/Documents/astrum_dashboard/dashboard/src/components/imageClassiferBuilder.js"],"names":["React","useState","Typography","FileDropper","Button","v4","uuidv4","styles","buildButton","marginTop","ImageClassiferBuilder","props","files","setFiles","user","datasetID","setDatasetID","firebase","upload_dataset","folderID","uploadFiles","then","values","getDownloadURL","url","xhr","XMLHttpRequest","open","setRequestHeader","post_body","uid","Math","floor","Date","file","send","JSON","stringify","addEventListener","status","parse","response","dataset_id","console","log","beginTraining","headers","features","build_classifer","Object","keys","length"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Typography } from '@material-ui/core'\nimport FileDropper from './fileDropper'\nimport Button from '@material-ui/core/Button'\nimport { v4 as uuidv4 } from 'uuid';\n\n\nconst styles = {\n    buildButton: {\n        marginTop: '20px'\n    }\n}\n\nexport default function ImageClassiferBuilder(props){\n\n    const [files, setFiles] = useState([])\n    const user = props.user;\n    const [datasetID, setDatasetID] = useState(\"\")\n    const firebase = props.firebase\n\n    function upload_dataset(){\n\n        const folderID = uuidv4()\n\n        firebase.uploadFiles(files, user, folderID).then(function(values){\n            firebase.getDownloadURL(folderID).then(function(url){\n                var xhr = new XMLHttpRequest()\n                xhr.open('POST', 'https://astrumdashboard.appspot.com/datasets')\n                xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n        \n                var post_body = {\n                    \"type\": \"image_classification\",\n                    \"uploaded_by\": user.uid,\n                    \"uploaded_at\": Math.floor(new Date()/1000),\n                    \"link\": url\n                }\n        \n                for (const file in files){\n                    post_body[\"child_datasets\"][file] = files[file]\n                }\n                xhr.send(JSON.stringify({\n                    post_body\n                }))\n                xhr.addEventListener('load', () => {\n                    if (xhr.status === 200) {\n                        setDatasetID(JSON.parse(xhr.response).dataset_id)\n                        console.log(\"Recieved data \", JSON.parse(xhr.response))\n                    }\n                })\n            })\n        })\n    }\n\n    function beginTraining(){\n        var xhr = new XMLHttpRequest()\n        xhr.open('POST', 'https://astrumdashboard.appspot.com/jobs')\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n\n        var post_body = {\n            \"type\": \"image_classification\",\n            \"dataset\": datasetID,\n            \"created_by\": user.uid,\n            \"created_at\": Math.floor(new Date()/1000)\n        }\n\n        xhr.send(JSON.stringify({\n            post_body\n        }))\n        xhr.addEventListener('load', () => {\n            if (xhr.status === 200) {\n                var headers = JSON.parse(xhr.response).features\n                console.log(\"Posted dataset\")\n                \n            }\n        })\n    }\n\n    function build_classifer(){\n        upload_dataset()\n    }\n\n    return (\n        <div>\n            <Typography>First we'll need to upload data. In the box below, drop folders containing your image classes</Typography>\n            <Typography>You'll need to organize your images into folders to make sure that the algorithm learns correctly. For instance, if you want to classify dogs vs. cats, you'll need to create two folders. One containing dog images, and another containing cat images.</Typography>\n            <FileDropper setFilesAction={setFiles}></FileDropper>\n            <div>\n                <Button style={styles.buildButton} variant='outlined' color='primary' disabled={Object.keys(files).length < 2} onClick={build_classifer}>Build Predictor</Button>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}