{"ast":null,"code":"import _slicedToArray from\"/home/srikanth/Documents/astrum_dashboard/dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{makeStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import CloudUpload from'@material-ui/icons/CloudUpload';import Chip from'@material-ui/core/Chip';import FeatureChips from'./featureChips';import TargetSelector from'./targetSelector';import ParsingContainer from'./parsingContainer';var styles=makeStyles(function(theme){return{dropboxButton:{marginTop:'20px'},chip:{marginTop:'10px'}};});export default function Builder(props){var classes=styles();var _useState=useState(\"No file selected\"),_useState2=_slicedToArray(_useState,2),filename=_useState2[0],setFilename=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),filelink=_useState4[0],setFilelink=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),csvHeaders=_useState6[0],setCSVHeaders=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),features=_useState8[0],setFeatures=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),target=_useState10[0],setTarget=_useState10[1];var user=props.user;function deleteSelectedFile(){setFilename(\"No file selected\");setFilelink(\"\");setCSVHeaders([]);setFeatures([]);setTarget(\"\");}function getHeaders(link){var xhr=new XMLHttpRequest();xhr.open('POST','http://127.0.0.1:8080/datasets');xhr.setRequestHeader(\"Content-Type\",\"application/json\");xhr.send(JSON.stringify({\"link\":link}));xhr.addEventListener('load',function(){if(xhr.status===200){var headers=JSON.parse(xhr.response).headers;setCSVHeaders(headers);setFeatures(headers);}});}function connectToDropbox(){var script=document.createElement('script');script.setAttribute('data-app-key','z5p9y3pr6ufqsbh');script.src=\"https://www.dropbox.com/static/api/2/dropins.js\";script.id=\"dropboxjs\";script.type=\"text/javascript\";document.head.appendChild(script);console.log(\"clicked\");var options={// Required. Called when a user selects an item in the Chooser.\nsuccess:function success(file){var filename=file[0].name;setFilelink(file[0].link);setFilename(filename);getHeaders(file[0].link);},cancel:function cancel(){},linkType:\"direct\",// or \"direct\"\nmultiselect:false,// or true\nfolderselect:false,// or true\nextensions:['.csv']};script.onerror=function(){console.log(\"Err\");};script.onload=function(){window.Dropbox.choose(options);};if(window.Dropbox){console.log(\"Trying to open picker\");window.Dropbox.choose(options);}}function targetSelected(target){setTarget(target);console.log(target);}function featuresSelected(features){setFeatures(features);console.log(features);}function buildPressed(response){console.log(response);}var ShowFeatures=function ShowFeatures(){if(csvHeaders.length>0){return React.createElement(\"div\",null,React.createElement(FeatureChips,{features:features,onSelection:featuresSelected}),React.createElement(\"br\",null),React.createElement(TargetSelector,{target:target,features:csvHeaders,onSelection:targetSelected}),React.createElement(\"br\",null),React.createElement(ParsingContainer,{target:target,features:features,onBuild:buildPressed}));}else{return null;}};return React.createElement(\"div\",null,React.createElement(\"h1\",null,\"Let's get started\"),React.createElement(\"span\",null,\"First, you'll need to prepare a dataset. \",React.createElement(\"a\",{href:\"http://www.astrum.ai\"},\"Click here\"),\" to check out how your data needs to be prepared before being uploaded to Dropbox.\"),React.createElement(\"br\",null),React.createElement(\"div\",null,React.createElement(Button,{startIcon:React.createElement(CloudUpload,null),variant:\"outlined\",color:\"primary\",onClick:connectToDropbox,className:classes.dropboxButton},\"Connect to dropbox\"),React.createElement(\"br\",null),React.createElement(Chip,{className:classes.chip,label:filename,onDelete:deleteSelectedFile,color:\"primary\"}),React.createElement(\"br\",null),React.createElement(ShowFeatures,null)));}","map":{"version":3,"sources":["/home/srikanth/Documents/astrum_dashboard/dashboard/src/components/build.js"],"names":["React","useState","makeStyles","Button","CloudUpload","Chip","FeatureChips","TargetSelector","ParsingContainer","styles","theme","dropboxButton","marginTop","chip","Builder","props","classes","filename","setFilename","filelink","setFilelink","csvHeaders","setCSVHeaders","features","setFeatures","target","setTarget","user","deleteSelectedFile","getHeaders","link","xhr","XMLHttpRequest","open","setRequestHeader","send","JSON","stringify","addEventListener","status","headers","parse","response","connectToDropbox","script","document","createElement","setAttribute","src","id","type","head","appendChild","console","log","options","success","file","name","cancel","linkType","multiselect","folderselect","extensions","onerror","onload","window","Dropbox","choose","targetSelected","featuresSelected","buildPressed","ShowFeatures","length"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport CloudUpload from '@material-ui/icons/CloudUpload'\nimport Chip from '@material-ui/core/Chip'\nimport FeatureChips from './featureChips'\nimport TargetSelector from './targetSelector';\nimport ParsingContainer from './parsingContainer'\n\n\nconst styles = makeStyles(theme => ({\n    dropboxButton:{\n        marginTop: '20px'\n    },\n    chip: {\n        marginTop: '10px'\n    }\n  }));\n\nexport default function Builder(props){\n\n    const classes = styles();\n    const [filename, setFilename] = useState(\"No file selected\");\n    const [filelink, setFilelink] = useState(\"\");\n    const [csvHeaders, setCSVHeaders] = useState([])\n    const [features, setFeatures] = useState([])\n    const [target, setTarget] = useState(\"\")\n    const user = props.user\n\n    function deleteSelectedFile(){\n        setFilename(\"No file selected\")\n        setFilelink(\"\")\n        setCSVHeaders([])\n        setFeatures([])\n        setTarget(\"\")\n    }\n\n    function getHeaders(link){\n        var xhr = new XMLHttpRequest()\n        xhr.open('POST', 'http://127.0.0.1:8080/datasets')\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n        xhr.send(JSON.stringify({\"link\": link}))\n        xhr.addEventListener('load', () => {\n            if (xhr.status === 200){\n                var headers = JSON.parse(xhr.response).headers\n                setCSVHeaders(headers)\n                setFeatures(headers)\n            }\n        })\n    }\n\n    function connectToDropbox(){\n\n        var script = document.createElement('script')\n        script.setAttribute('data-app-key', 'z5p9y3pr6ufqsbh')\n        script.src = \"https://www.dropbox.com/static/api/2/dropins.js\"\n        script.id = \"dropboxjs\"\n        script.type = \"text/javascript\"\n        document.head.appendChild(script);\n\n        console.log(\"clicked\")\n        var options = {\n\n            // Required. Called when a user selects an item in the Chooser.\n            success: function(file) {\n                var filename = file[0].name\n                setFilelink(file[0].link)\n                setFilename(filename)\n                getHeaders(file[0].link)\n            },\n            cancel: function() {\n        \n            },\n            linkType: \"direct\", // or \"direct\"\n            multiselect: false, // or true\n            folderselect: false, // or true\n            extensions: ['.csv']\n        };\n        script.onerror = function(){\n            console.log(\"Err\")\n        }\n        script.onload = function(){\n            window.Dropbox.choose(options)\n        }\n        if (window.Dropbox){\n            console.log(\"Trying to open picker\")\n            window.Dropbox.choose(options)\n        }\n        \n    }\n\n    function targetSelected(target){\n        setTarget(target)\n        console.log(target)\n    }\n\n    function featuresSelected(features){\n        setFeatures(features)\n        console.log(features)\n    }\n\n    function buildPressed(response){\n        console.log(response)\n    }\n\n    const ShowFeatures = (function(){\n        if(csvHeaders.length > 0){\n            return(\n                <div>\n                    <FeatureChips features={features} onSelection={featuresSelected}/>\n                    <br></br>\n                    <TargetSelector target={target} features={csvHeaders} onSelection={targetSelected}/>\n                    <br></br>\n                    <ParsingContainer target={target} features={features} onBuild={buildPressed}></ParsingContainer>\n                </div>\n            )\n        }else{\n            return (\n                null\n            )\n        }\n    })\n\n\n    return (\n        <div>\n            <h1>Let's get started</h1>\n            <span>First, you'll need to prepare a dataset. <a href=\"http://www.astrum.ai\">Click here</a> to check out how your data needs to be prepared before being uploaded to Dropbox.</span>\n            <br></br>\n            <div>\n                <Button startIcon={<CloudUpload/>} variant='outlined' color='primary' onClick={connectToDropbox} className={classes.dropboxButton}>Connect to dropbox</Button>\n                <br></br>\n                <Chip className={classes.chip} label={filename} onDelete={deleteSelectedFile} color=\"primary\" />\n                <br></br>\n                <ShowFeatures />\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}